import{_ as s,k as a,l as n,W as l}from"./chunks/framework.f1e8809f.js";const F=JSON.parse('{"title":"MySql 表结构操作","description":"","frontmatter":{},"headers":[],"relativePath":"MySql/index.md"}'),p={name:"MySql/index.md"},o=l(`<h1 id="mysql-表结构操作" tabindex="-1">MySql 表结构操作 <a class="header-anchor" href="#mysql-表结构操作" aria-label="Permalink to &quot;MySql 表结构操作&quot;">​</a></h1><h2 id="ddl" tabindex="-1">DDL <a class="header-anchor" href="#ddl" aria-label="Permalink to &quot;DDL&quot;">​</a></h2><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">表名称</span><span style="color:#A6ACCD;"> (</span></span>
<span class="line"><span style="color:#A6ACCD;">    字段1 字段类型 [约束] comment </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">描述文字</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    ...</span></span>
<span class="line"><span style="color:#A6ACCD;">    字段1 字段类型 [约束] comment </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">描述文字</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">) comment </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">表注释</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">tb_user</span><span style="color:#A6ACCD;"> (</span></span>
<span class="line"><span style="color:#A6ACCD;">	id </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">PRIMARY KEY</span><span style="color:#A6ACCD;"> auto_increment COMMENT  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ID,唯一标识</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	username  </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">NOT NULL</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">UNIQUE</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">用户名称</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">NOT NULL</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">姓名</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	age </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">年龄</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	gender  </span><span style="color:#C792EA;">CHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">男</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> COMMENT </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">性别</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">) COMMENT </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">用户数据表</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">;</span></span></code></pre></div><table><thead><tr><th>约束</th><th>描述</th><th>关键字</th></tr></thead><tbody><tr><td>非空约束</td><td>限制改字段不能为 null</td><td>NOT NULL</td></tr><tr><td>唯一约束</td><td>保证字段的所有数据都是唯一的、不重复的</td><td>UNIQUE</td></tr><tr><td>主键约束</td><td>主键是一行数据的唯一标识富符、要求非空且唯一</td><td>PRIMARY KEY (auto_interment)</td></tr><tr><td>默认约束</td><td>保存数据时如果未指定，则采用默认数据</td><td>DEFAULT</td></tr><tr><td>外建约束</td><td>让两张表数据建立连接，保证数据的一致性和完整性</td><td>foreign key</td></tr></tbody></table><h3 id="常见的数据类习惯" tabindex="-1">常见的数据类习惯 <a class="header-anchor" href="#常见的数据类习惯" aria-label="Permalink to &quot;常见的数据类习惯&quot;">​</a></h3><p>主要为三种数据类型 数值类型、字符串类型、日期时间类型</p><h3 id="基本语法" tabindex="-1">基本语法 <a class="header-anchor" href="#基本语法" aria-label="Permalink to &quot;基本语法&quot;">​</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 查看数据库表</span></span>
<span class="line"><span style="color:#A6ACCD;">  SHOW TABLES;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">-- 查看表结构</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">DESC</span><span style="color:#A6ACCD;"> 表名称;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">-- 查看表创建语句</span></span>
<span class="line"><span style="color:#A6ACCD;">  SHOW </span><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> 表名称;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">-- 添加字段</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> 表名称 </span><span style="color:#F78C6C;">ADD</span><span style="color:#A6ACCD;"> 字段名称 字段类型 [约束] COMMENT </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">描述文字</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">-- 修改字段类型</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> 表名称 </span><span style="color:#F78C6C;">MODIFY</span><span style="color:#A6ACCD;"> 字段名称 字段类型 [约束] COMMENT </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">描述文字</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">-- 修改字段名称</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> 表名称 CHANGE 被修改的字段名称 修改为的名称 字段类型 [约束] COMMENT </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">描述文字</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">-- 删除字段</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> 表名称 </span><span style="color:#F78C6C;">DROP</span><span style="color:#A6ACCD;"> COLUMN 字段名称;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">-- 修改表名称</span></span>
<span class="line"><span style="color:#A6ACCD;">  RENAME </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> 被修改的表名称 </span><span style="color:#F78C6C;">to</span><span style="color:#A6ACCD;"> 表名称</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">-- 删除表</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">DROP</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">IF</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">EXISTS</span><span style="color:#A6ACCD;"> 表名称;</span></span></code></pre></div><h2 id="dml" tabindex="-1">DML <a class="header-anchor" href="#dml" aria-label="Permalink to &quot;DML&quot;">​</a></h2><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 插入数据</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 单个插入</span></span>
<span class="line"><span style="color:#89DDFF;">   </span><span style="color:#676E95;font-style:italic;">-- 注意事项，插入的主键和值要一一对应</span></span>
<span class="line"><span style="color:#F78C6C;">INSERT INTO</span><span style="color:#A6ACCD;"> 表名称 (字段1,字段2,字段3,...) </span><span style="color:#F78C6C;">VALUES</span><span style="color:#A6ACCD;"> (值1,值2,值3,...);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 多个插入</span></span>
<span class="line"><span style="color:#89DDFF;">   </span><span style="color:#676E95;font-style:italic;">-- 插入的字段要符合字段的长度和大小</span></span>
<span class="line"><span style="color:#F78C6C;">INSERT INTO</span><span style="color:#A6ACCD;"> 表名称 </span><span style="color:#F78C6C;">VALUES</span><span style="color:#A6ACCD;"> (值1,值2,值3,...),(值1,值2,值3,...),(值1,值2,值3,...);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 修改数据</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">-- 在更新数据时，若表中字段含有update_time字段，应该一同更新 update_time = now()</span></span>
<span class="line"><span style="color:#F78C6C;">UPDATE</span><span style="color:#A6ACCD;"> 表名称 </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> 字段1</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">值1,字段2</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">值2,... </span><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> 条件;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">-- 更新表中字段所有数据 就不需要 WHERE 条件</span></span>
<span class="line"><span style="color:#F78C6C;">UPDATE</span><span style="color:#A6ACCD;"> 表名称 </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> 字段1</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">值1,字段2</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">值2,...;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 删除数据</span></span>
<span class="line"><span style="color:#F78C6C;">DELETE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> 表名称 </span><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> 条件</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">-- 删除表中所有数据 就不需要 WHERE 条件</span></span>
<span class="line"><span style="color:#F78C6C;">DELETE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> 表名称;</span></span></code></pre></div><h2 id="dql" tabindex="-1">DQL <a class="header-anchor" href="#dql" aria-label="Permalink to &quot;DQL&quot;">​</a></h2><h3 id="基础查询" tabindex="-1">基础查询 <a class="header-anchor" href="#基础查询" aria-label="Permalink to &quot;基础查询&quot;">​</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 字段查询</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> 字段1,字段2,... </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> 表名称</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">-- 查询表中所有字段</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> 表名称</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">-- 设置别名</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> 字段1 别名,字段2 别名,... </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> 表名称</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">-- 去重查询</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">SELECT DISTINCT</span><span style="color:#A6ACCD;"> 字段1,字段2,... </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> 表名称</span></span></code></pre></div><h3 id="条件查询" tabindex="-1">条件查询 <a class="header-anchor" href="#条件查询" aria-label="Permalink to &quot;条件查询&quot;">​</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 条件查询语句</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> 字段名称 </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> 表名称 </span><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> 条件语句</span></span></code></pre></div><table><thead><tr><th>比较运算符</th><th>功能</th></tr></thead><tbody><tr><td>&gt;</td><td>大于</td></tr><tr><td>&gt;=</td><td>大于等于</td></tr><tr><td>&lt;</td><td>小于</td></tr><tr><td>&lt;=</td><td>小于等于</td></tr><tr><td>=</td><td>等于</td></tr><tr><td>&lt;&gt; 或 !=</td><td>不等于</td></tr><tr><td>between ... and ...</td><td>在某个范围之内（含最小，最大值）</td></tr><tr><td>in(...)</td><td>在 in 之后的别表中的值，多选一</td></tr><tr><td>like 占位符</td><td>模糊匹配（_匹配单个字符，% 匹配任意个字符）</td></tr><tr><td>is null</td><td>是 null</td></tr></tbody></table><h3 id="逻辑运算符" tabindex="-1">逻辑运算符 <a class="header-anchor" href="#逻辑运算符" aria-label="Permalink to &quot;逻辑运算符&quot;">​</a></h3><table><thead><tr><th>逻辑运算符</th><th>功能</th></tr></thead><tbody><tr><td>and 或 &amp;&amp;</td><td>与</td></tr><tr><td>or 或 ||</td><td>或</td></tr><tr><td>not 或 !</td><td>非</td></tr></tbody></table><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> username</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">张三二</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> id</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> job </span><span style="color:#F78C6C;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">null</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">password</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123456</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">||</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">password</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">null</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> job </span><span style="color:#F78C6C;">is not null</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> job </span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">||</span><span style="color:#A6ACCD;"> job </span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> job </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> username </span><span style="color:#F78C6C;">like</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">___</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> username </span><span style="color:#F78C6C;">like</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">张%</span><span style="color:#89DDFF;">&#39;</span></span></code></pre></div><h3 id="dql-分组查询" tabindex="-1">DQL-分组查询 <a class="header-anchor" href="#dql-分组查询" aria-label="Permalink to &quot;DQL-分组查询&quot;">​</a></h3><p>聚合函数 null 值不参与运算</p><table><thead><tr><th>函数</th><th>功能</th></tr></thead><tbody><tr><td>max</td><td>最大</td></tr><tr><td>min</td><td>最小</td></tr><tr><td>sum</td><td>求和</td></tr><tr><td>avg</td><td>平均</td></tr><tr><td>count</td><td>计数</td></tr></tbody></table><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> 字段列表 </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> 表名称 </span><span style="color:#F78C6C;">GROUP BY</span><span style="color:#A6ACCD;"> 分组字段</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> 字段列表 </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> 表名称[WHERE 条件] </span><span style="color:#F78C6C;">GROUP BY</span><span style="color:#A6ACCD;"> 分组字段 </span><span style="color:#F78C6C;">HAVING</span><span style="color:#A6ACCD;"> 分组条件</span></span></code></pre></div><p>WHERE 和 HAVING 的区别</p><ol><li><p>执行的时机不同，where 在分组之前进行过滤，不满足 where 条件，不参与分组，而 having 是在分组之后对结果进行过滤</p></li><li><p>判断条件不同，where 不能对聚合函数进行判断，而 having 可以对聚合函数进行判断</p></li></ol><h3 id="dql-排序查询" tabindex="-1">DQL-排序查询 <a class="header-anchor" href="#dql-排序查询" aria-label="Permalink to &quot;DQL-排序查询&quot;">​</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> 字段列表 </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> 表名称 [WHERE 条件列表][GROUP BY 分组字段] </span><span style="color:#F78C6C;">ORDER BY</span><span style="color:#A6ACCD;"> 字段1 [ASC|DESC],字段2 [ASC|DESC],...</span></span></code></pre></div><p>ASC 升序 DESC 降序</p><h3 id="dql-分页查询" tabindex="-1">DQL-分页查询 <a class="header-anchor" href="#dql-分页查询" aria-label="Permalink to &quot;DQL-分页查询&quot;">​</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> 字段名 </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> 表名称 </span><span style="color:#F78C6C;">LIMIT</span><span style="color:#A6ACCD;"> 开始位置,查询条数</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 注意事项</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">-- 起始索引从0开始，起始索引 = （查询页码 - 1） * 每页显示条数</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">-- 分页查询事数据库的方言，不同的数据库有不同的实现，MYSQL中事LIMIT</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">-- 如果查询的事第一页的数据，起始索引可以省略。直接简化为limit 10</span></span></code></pre></div><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 函数</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">if</span><span style="color:#A6ACCD;">(表达式,tvalue,fvalue) 表达式为true 取tvalue，否则取fvalue</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">case</span><span style="color:#A6ACCD;"> 表达式</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">when</span><span style="color:#A6ACCD;"> value1 </span><span style="color:#F78C6C;">then</span><span style="color:#A6ACCD;"> result1</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">when</span><span style="color:#A6ACCD;"> value2 </span><span style="color:#F78C6C;">then</span><span style="color:#A6ACCD;"> result2</span></span>
<span class="line"><span style="color:#A6ACCD;">    ...</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">else</span><span style="color:#A6ACCD;"> result</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;"> </span><span style="color:#676E95;font-style:italic;">-- 案例</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">if</span><span style="color:#A6ACCD;">(gender</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">男性</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">女性</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)  性别,</span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> gender;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">case</span><span style="color:#A6ACCD;"> job</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">then</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">班主任</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">then</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">讲师</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">then</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">学生主管</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">then</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">校验主管</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">未分配</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> 身份, </span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp</span></span>
<span class="line"><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> job;</span></span></code></pre></div><h2 id="表结构设计" tabindex="-1">表结构设计 <a class="header-anchor" href="#表结构设计" aria-label="Permalink to &quot;表结构设计&quot;">​</a></h2><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">表名称</span><span style="color:#A6ACCD;"> (</span></span>
<span class="line"><span style="color:#A6ACCD;">  字段名 数据类型,</span></span>
<span class="line"><span style="color:#A6ACCD;">  [constraint 约束名称] </span><span style="color:#C792EA;">foreign key</span><span style="color:#A6ACCD;"> (字段名) </span><span style="color:#C792EA;">references</span><span style="color:#A6ACCD;"> 主表名称(主表字段名)</span></span>
<span class="line"><span style="color:#A6ACCD;"> )</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;"> </span><span style="color:#676E95;font-style:italic;">-- 表完成后</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> 表名称 </span><span style="color:#F78C6C;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">constraint</span><span style="color:#A6ACCD;"> 约束名称 </span><span style="color:#C792EA;">foreign key</span><span style="color:#A6ACCD;"> （字段名） </span><span style="color:#C792EA;">references</span><span style="color:#A6ACCD;"> 主比奥名称</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> tp_emp </span><span style="color:#F78C6C;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">constraint</span><span style="color:#A6ACCD;"> tp_emp___fk_dept_id </span><span style="color:#C792EA;">foreign key</span><span style="color:#A6ACCD;"> (dept_id) </span><span style="color:#C792EA;">references</span><span style="color:#A6ACCD;"> dept (id);</span></span></code></pre></div><p>物理外健</p><h3 id="一对多" tabindex="-1">一对多 <a class="header-anchor" href="#一对多" aria-label="Permalink to &quot;一对多&quot;">​</a></h3><ul><li>概念 使用 foreign key 定于物理外键关联另外一张表</li><li>缺点 <ol><li>影响增删查的效率</li><li>仅用与单节点数据库，不适合分布式集群长江</li><li>容易引发数据库死锁，消耗性能</li></ol></li></ul><p>逻辑外键</p><ul><li>概念 在业务逻辑上解决外建关联</li><li>通过逻辑外建 就可以很方便的解决上述问题</li></ul><h3 id="一对一" tabindex="-1">一对一 <a class="header-anchor" href="#一对一" aria-label="Permalink to &quot;一对一&quot;">​</a></h3><ul><li><p>案例 ： 用户 与 身份证信息的 关系。</p></li><li><p>关系 ：一对一的关系，用于单表拆分将一个表的基础字段放在一张表里，娶她字段放在另外一张表中，以提升操作效率</p></li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">tb_user</span><span style="color:#A6ACCD;"> (</span></span>
<span class="line"><span style="color:#A6ACCD;">    id </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> unsigned </span><span style="color:#F78C6C;">unique</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">primary key</span><span style="color:#A6ACCD;"> auto_increment comment </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ID</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">not null</span><span style="color:#A6ACCD;"> comment </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">姓名</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    gender </span><span style="color:#F78C6C;">tinyint</span><span style="color:#A6ACCD;"> unsigned </span><span style="color:#F78C6C;">not null</span><span style="color:#A6ACCD;"> comment </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1 男 2 女</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    phone </span><span style="color:#C792EA;">char</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">11</span><span style="color:#A6ACCD;">) comment </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">手机号</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    degree </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">) comment </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">学历</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">) comment </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">用户信息</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> tb_user (id, </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;">, gender, phone, degree)</span></span>
<span class="line"><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">张三</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">13222222222</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">代转</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">       (</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">张四</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">13222222222</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">代转</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">       (</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">张五</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">13222222222</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">代转</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">       (</span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">张六</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">13222222222</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">代转</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">tb_user_card</span><span style="color:#A6ACCD;"> (</span></span>
<span class="line"><span style="color:#A6ACCD;">    id </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> unsigned  </span><span style="color:#C792EA;">primary key</span><span style="color:#A6ACCD;"> auto_increment comment </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ID</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    nationality </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">not null</span><span style="color:#A6ACCD;"> comment </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">民族</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    id_card </span><span style="color:#C792EA;">char</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">18</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">not null</span><span style="color:#A6ACCD;"> comment </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">身份证号码</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    issued </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">not null</span><span style="color:#A6ACCD;">  comment </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">签发机关</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    user_id  </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> unsigned  </span><span style="color:#F78C6C;">not null</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">unique</span><span style="color:#A6ACCD;"> comment </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ID</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">constraint</span><span style="color:#A6ACCD;"> fk_user_id </span><span style="color:#C792EA;">foreign key</span><span style="color:#A6ACCD;"> (user_id) </span><span style="color:#C792EA;">references</span><span style="color:#A6ACCD;"> tb_user(id)</span></span>
<span class="line"><span style="color:#A6ACCD;">) comment </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">身份信息</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> tb_user_card</span></span>
<span class="line"><span style="color:#F78C6C;">values</span></span>
<span class="line"><span style="color:#A6ACCD;">    (</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">汉</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">123456789123456701</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">西安</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    (</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">汉</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">123456789123456702</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">西安</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    (</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">汉</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">123456789123456703</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">西安</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    (</span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">汉</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">123456789123456704</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">西安</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">);</span></span></code></pre></div><h3 id="多对多" tabindex="-1">多对多 <a class="header-anchor" href="#多对多" aria-label="Permalink to &quot;多对多&quot;">​</a></h3><ul><li>案例 ： 学生与课程的关系</li><li>关系 ： 一个学生 可以选修多个课程，一个课程可以被多个学生选修</li><li>实现 ： 建立第三张表中间表，中间表至少包含两个外建，分别关联两张表的主键</li></ul><h3 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h3><ul><li>一对多 在多的一方添加外建，关联另外一方的主键</li><li>一对一 在任意一方，关联另外一方的主键</li><li>多对多 通过中间表的两个外建，分别关联另外两张表的主键</li></ul><h2 id="多表查询" tabindex="-1">多表查询 <a class="header-anchor" href="#多表查询" aria-label="Permalink to &quot;多表查询&quot;">​</a></h2><ul><li>链接查询</li><li>内连接，相当于查询 A，B 交集的部门数据</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 隐式内链接</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> 字段列表 </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> 表1 别名1,表2 别名2 </span><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> 连接条件</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> dept.name,tp_emp.name </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tp_emp,dept </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;">  tp_emp.dept_id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> dept.id;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 显示内链接</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> 字段列表 </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> 表1 别名1 </span><span style="color:#F78C6C;">INNER JOIN</span><span style="color:#A6ACCD;"> 表2 别名2 </span><span style="color:#F78C6C;">ON</span><span style="color:#A6ACCD;"> 连接条件</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> tp_emp.name,dept.name </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tp_emp </span><span style="color:#F78C6C;">inner join</span><span style="color:#A6ACCD;"> dept </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> tp_emp.dept_id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> dept.id</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> e.name,d.name </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tp_emp e,dept d </span><span style="color:#F78C6C;">join</span><span style="color:#A6ACCD;"> d.dept_id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> e.id</span></span></code></pre></div><ul><li>外连接</li><li>左外连接：查询 左表所有数据（包括两张表交集部分数据）</li><li>右外连接：查询 右表所有数据（包括两张表交集部分数据）</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">左 </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> 字段列表 </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> 表1 left [outer] </span><span style="color:#F78C6C;">join</span><span style="color:#A6ACCD;"> 表2 </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> 连接条件;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> e.name,d.name </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tp_emp e </span><span style="color:#F78C6C;">left join</span><span style="color:#A6ACCD;"> dept d </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> e.dept_id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> d.id;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">右 </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> 字段列表 </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> 表1 right [outer] </span><span style="color:#F78C6C;">join</span><span style="color:#A6ACCD;"> 表2 </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> 连接条件;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> e.name,d.name </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tp_emp e </span><span style="color:#F78C6C;">right join</span><span style="color:#A6ACCD;"> dept d </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> d.id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> e.dept_id</span></span></code></pre></div><h2 id="子查询" tabindex="-1">子查询 <a class="header-anchor" href="#子查询" aria-label="Permalink to &quot;子查询&quot;">​</a></h2><ul><li><p>sql 语句中嵌套 select 语句，成为嵌套查询，又称子查询</p></li><li><p>形式</p></li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> t1 </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> column1 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> colum1 </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> t2)</span></span></code></pre></div><ul><li><p>子查询外语的语句可以是 insert / update / delete / select 的任何一个，最常见的是 select</p></li><li><p>分类</p></li></ul><ol><li>标量子查询 ：子查询返回的结果为单个值</li></ol><ul><li>子查询返回的结果是单个值（数字，字符串，日期等），最简单的形式</li><li>常用的操作符 =、 &lt;&gt;、 &gt; 、&gt;=、 &lt; 、&lt;=</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tp_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> dept_id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> id </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dept </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">咨询部</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span></code></pre></div><ol start="2"><li>列子查询 ： 子查询返回的结果是一列</li></ol><ul><li>子查询返回的结果是一列</li><li>常用的操作符 in 、not in 等</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tp_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> dept_id </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> ( </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> id </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dept </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">教研部</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">or</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">咨询部</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><ol start="3"><li>行子查询 ：子查询返回的结果为多行多咧</li></ol><ul><li>子查询返回的结果是一行</li><li>常用的操作符： = 、&lt;&gt; 、in、 not in</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tp_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> (entry_date, job) </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> entry_date, job </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tp_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">小红</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span></code></pre></div><ol start="4"><li>表子查询</li></ol><ul><li>子查询返回的结果是多行多列、常作为临时表</li><li>常用的操作符：in</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> e.</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">,d.name </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tp_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> entry_date </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2020-01-01</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) e,dept d </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> e.dept_id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> d.id</span></span></code></pre></div><h2 id="事务" tabindex="-1">事务 <a class="header-anchor" href="#事务" aria-label="Permalink to &quot;事务&quot;">​</a></h2><p><strong><em>事务</em><strong>是一组操作的集合，它是一个不可分割的工作单位，事务会把所有的操作作为一个整体一起向系统提交操作请求，即使是这些操作</strong><em>要么同时成功，要么同时失败</em></strong></p><ul><li>场景 删除 部门 以及部门下的员工</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">delete</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dept </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> id</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#F78C6C;">delete</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tp_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> dept_id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">;</span></span></code></pre></div><p>事务控制</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 开启事务</span></span>
<span class="line"><span style="color:#F78C6C;">start transaction</span><span style="color:#A6ACCD;">;</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">begin</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 提交事务</span></span>
<span class="line"><span style="color:#F78C6C;">commit</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 回滚事务</span></span>
<span class="line"><span style="color:#F78C6C;">rollback</span><span style="color:#A6ACCD;">;</span></span></code></pre></div><h3 id="事务四大特性" tabindex="-1">事务四大特性 <a class="header-anchor" href="#事务四大特性" aria-label="Permalink to &quot;事务四大特性&quot;">​</a></h3><ul><li>原子性 事务是不可分割的最小单元，要么全部成功，要么全部失败</li><li>一致性 事务完成时，必须使所有的数据都保持一致的状态</li><li>隔离性 数据库系统提供的隔离机制，保证事务在不受外部并发操作影响的独立环境下运行</li><li>持久性 事务一旦提交或回滚，他对数据库中的数据的改变就是永久的</li></ul><h2 id="索引" tabindex="-1">索引 <a class="header-anchor" href="#索引" aria-label="Permalink to &quot;索引&quot;">​</a></h2><ul><li>索引 是帮助数据库 **<em>高效获取数据</em>**的数据结构</li><li>创建索引</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">index</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">索引名</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> 表名（字段名）</span></span></code></pre></div><ul><li>查看索引</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">show </span><span style="color:#F78C6C;">index</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> 表名称</span></span></code></pre></div><ul><li>删除索引</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">index</span><span style="color:#A6ACCD;"> 索引名 </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> 表名</span></span></code></pre></div><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">index</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">idx_emp_name</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> tp_emp(</span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">show </span><span style="color:#F78C6C;">index</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tp_emp;</span></span>
<span class="line"><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">index</span><span style="color:#A6ACCD;"> idx_emp_name </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> tp_emp</span></span></code></pre></div><ul><li><p>优点</p><ol><li>提高数据查询的效率，降低数据库的 IO 成本</li><li>通过索引列对数据进行排序，降低数据排序的成本，降低 CPU 消耗</li></ol></li><li><p>缺点</p><ol><li>索引会占用存储空间</li><li>索引大大提高了查询效率。同时也降低了 insert、 update、 delete 的效率</li></ol></li></ul><h3 id="注意事项" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项" aria-label="Permalink to &quot;注意事项&quot;">​</a></h3><ul><li>主键字段，在建表时，会自动创建主键索引</li><li>添加唯一约束时，数据库实际上会添加唯一索引</li></ul>`,85),e=[o];function t(C,c,r,y,A,D){return a(),n("div",null,e)}const d=s(p,[["render",t]]);export{F as __pageData,d as default};
